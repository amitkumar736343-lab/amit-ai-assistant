<!DOCTYPE html>
<html lang="en">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">

<title>BROTHER GOD AI ğŸ˜ˆğŸ”¥</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

</head>

<body class="bg-gray-100">

<div class="flex min-h-screen">

<!-- SIDEBAR -->

<div class="w-64 bg-white border-r p-3">

<button onclick="newChat()"
class="bg-blue-500 text-white w-full p-2 rounded">

New Chat

</button>

<div id="chatList"
class="mt-4 space-y-2">

</div>

</div>


<!-- MAIN -->

<div class="flex flex-col flex-1">

<div class="p-3 bg-white border-b font-bold">

BROTHER GOD AI ğŸ¤–ğŸ”¥

</div>


<div id="chatArea"
class="flex-1 overflow-auto p-4 space-y-4 pb-32">

</div>


<div
class="fixed bottom-0 left-64 right-0 bg-white border-t p-3 flex gap-2">

<textarea id="prompt"
class="flex-1 border rounded p-2"
placeholder="Ask anything...">

</textarea>

<button id="imageBtn"
class="bg-purple-500 text-white px-3 rounded">

ğŸ–¼

</button>

<button id="videoBtn"
class="bg-pink-500 text-white px-3 rounded">

ğŸ¬

</button>

<button id="send"
class="bg-blue-500 text-white px-4 rounded">

Send

</button>

</div>

</div>

</div>



<script>

document.addEventListener("DOMContentLoaded",()=>{

const chatArea=document.getElementById("chatArea")
const promptBox=document.getElementById("prompt")
const send=document.getElementById("send")
const chatList=document.getElementById("chatList")
const imageBtn=document.getElementById("imageBtn")
const videoBtn=document.getElementById("videoBtn")



// CHAT MEMORY

let chats=
JSON.parse(localStorage.getItem("broChats")||"[]")

if(!chats.length){

chats=[{id:Date.now(),messages:[]}]

}

let active=chats[0].id



function activeChat(){

return chats.find(c=>c.id===active)

}


function saveChats(){

localStorage.setItem(

"broChats",

JSON.stringify(chats)

)

renderSidebar()

}



function renderSidebar(){

chatList.innerHTML=""

chats.forEach(c=>{

let d=document.createElement("div")

d.className="border p-2 cursor-pointer"

d.innerText="Chat "+c.id

d.onclick=()=>{

active=c.id

renderMessages()

}

chatList.appendChild(d)

})

}

renderSidebar()



function addMessage(role,text){

activeChat().messages.push({role,text})

saveChats()

renderMessages()

}



function renderMessages(){

chatArea.innerHTML=""

activeChat().messages.forEach(m=>{

let div=document.createElement("div")

div.className=m.role==="user"
?"text-right":""

let bubble=document.createElement("div")

bubble.className=

"inline-block bg-white shadow rounded p-3 max-w-xl"

bubble.innerHTML=marked.parse(m.text)

div.appendChild(bubble)

chatArea.appendChild(div)

})

chatArea.scrollTop=999999

}



// TYPING

async function typingReply(text){

let msg=""

let bubble=document.createElement("div")

bubble.className=

"bg-white shadow rounded p-3 inline-block"

chatArea.appendChild(bubble)

for(let c of text){

msg+=c

bubble.innerHTML=

marked.parse(msg+" â–‹")

await new Promise(r=>setTimeout(r,15))

chatArea.scrollTop=999999

}

bubble.innerHTML=marked.parse(msg)

}



// VOICE SPEAK

function speakAI(t){

try{

let s=new SpeechSynthesisUtterance(t)

speechSynthesis.cancel()

speechSynthesis.speak(s)

}catch{}

}



// MIC

function startVoice(){

try{

let r=new webkitSpeechRecognition()

r.lang="en-US"

r.start()

r.onresult=e=>{

promptBox.value=e.results[0][0].transcript

sendChat()

}

}catch{

alert("Mic unsupported")

}

}



let lastTap=0

send.onclick=()=>{

let n=Date.now()

if(n-lastTap<400){

startVoice()

}else{

sendChat()

}

lastTap=n

}



// AI CHAT

async function sendChat(){

let text=promptBox.value.trim()

if(!text)return

promptBox.value=""

addMessage("user",text)

addMessage("assistant","ğŸ¤– Thinking...")

try{

let res=await fetch(

"https://patient-mountain-73cc.amitkumar736343.workers.dev/chat"

)

let data=await res.json()

await typingReply(data.reply)

speakAI(data.reply)

}catch{

addMessage("assistant","âŒ API ERROR")

}

}



// RATIO

function chooseRatio(cb){

let r=prompt(

"1 Square 1:1\n2 YouTube 16:9\n3 Shorts 9:16\n4 Portrait 3:4"

)

let w=1024,h=1024

if(r=="2"){w=1280;h=720}

if(r=="3"){w=720;h=1280}

if(r=="4"){w=768;h=1024}

cb(w,h)

}



// IMAGE

imageBtn.onclick=()=>{

let text=prompt("Image Prompt")

if(!text)return

chooseRatio((w,h)=>{

addMessage("assistant","ğŸ–¼ Generating...")

let url=

`https://image.pollinations.ai/prompt/${encodeURIComponent(text)}?width=${w}&height=${h}`

setTimeout(()=>{

addMessage("assistant",

`![img](${url})

<button onclick="makeVideo('${url}')">

ğŸ¬ Make 8s Video

</button>`)

},1200)

})

}



// VIDEO 8 SECOND

window.makeVideo=function(img){

addMessage("assistant",

"ğŸ¬ Creating 8 Second Cinematic Video...")

let v=

`<video autoplay loop muted controls style="max-width:100%">

<source src="${img}" type="video/mp4">

</video>

<p>â­ 8 Second Loop Preview</p>`

setTimeout(()=>{

addMessage("assistant",v)

},1200)

}



// VIDEO PROMPT

videoBtn.onclick=()=>{

let text=prompt("Video Prompt")

if(!text)return

chooseRatio(()=>{

addMessage("assistant",

"ğŸ¬ Hollywood Video Accepted:<br>"+text)

})

}



// NEW CHAT

window.newChat=function(){

let id=Date.now()

chats.unshift({id,messages:[]})

active=id

saveChats()

renderMessages()

}

renderMessages()

})

</script>

</body>
</html>
